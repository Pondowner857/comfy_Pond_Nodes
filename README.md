# üê≥ Pond Nodes for ComfyUI

[English](#english) | [‰∏≠Êñá](#chinese)

---

## Chinese

‰∏Ä‰∏™‰∏∫ComfyUIËÆæËÆ°ÁöÑÂÖ®Èù¢Ëá™ÂÆö‰πâËäÇÁÇπÈõÜÂêàÔºåÊèê‰æõ‰∏∞ÂØåÁöÑÂõæÂÉèÂ§ÑÁêÜÂíåÈÅÆÁΩ©Êìç‰ΩúÂäüËÉΩÔºåÂåÖÂê´ËÆ°ÁÆóÊú∫ËßÜËßâ„ÄÅÂõæÂÉèÂ§ÑÁêÜÂíåÂ∑•‰ΩúÊµÅ‰ºòÂåñÁöÑÈ´òÁ∫ßÂ∑•ÂÖ∑„ÄÇ

### ‚ú® ÂäüËÉΩÁâπÁÇπ

ËØ•Êèí‰ª∂ÈõÜÂêàÂåÖÂê´Â§öÁßçÂÆûÁî®ËäÇÁÇπÔºåÂèØ‰ª•Â∏ÆÂä©‰Ω†Ôºö

- üîç **YOLOÂØπË±°Ê£ÄÊµã‰∏éË£ÅÂâ™**Ôºö
  - YOLOÊ£ÄÊµãË£ÅÂâ™ÔºöÊô∫ËÉΩÂØπË±°Ê£ÄÊµãÂíåË£ÅÂâ™ÔºåÊîØÊåÅÁ±ªÂà´ËøáÊª§ÂíåÁΩÆ‰ø°Â∫¶ËÆæÁΩÆ
  - YOLOÂõæÂÉèÊãºÊé•ÔºöÂ∞ÜÊ£ÄÊµãÂà∞ÁöÑÂØπË±°Êô∫ËÉΩÊãºÊé•Âà∞ÂÖ∂‰ªñÂõæÂÉè‰∏ä

- üé≠ **È´òÁ∫ßÈÅÆÁΩ©Êìç‰Ωú**Ôºö
  - ÈÅÆÁΩ©Â∏ÉÂ∞îËøêÁÆóÔºöÊîØÊåÅ‰∫§ÈõÜ„ÄÅÂπ∂ÈõÜ„ÄÅÂ∑ÆÈõÜ„ÄÅÂºÇÊàñÁ≠âÊìç‰ΩúÔºåÂ∏¶Êúâ9ÁßçÂØπÈΩêÊñπÂºè
  - Â§öÈÅÆÁΩ©ËøêÁÆóÔºöÊîØÊåÅÂ§ö‰∏™ÈÅÆÁΩ©ÁöÑËøûÁª≠Â∏ÉÂ∞îËøêÁÆó
  - ÈÅÆÁΩ©ÂêàÂπ∂‰∏éÂêàÊàêÔºöÊèê‰æõÈÅÆÁΩ©ÂêàÂπ∂ÂíåÂ§öÈÅÆÁΩ©ÂêàÂπ∂ËäÇÁÇπ
  - ÈÅÆÁΩ©Âå∫ÂüüÊâ©Â±ïÔºöÂèØÂú®Âõõ‰∏™ÊñπÂêëÊâ©Â±ïÈÅÆÁΩ©Âå∫ÂüüÔºåÊîØÊåÅÊ∏êÂèòËøáÊ∏°
  - ÈÅÆÁΩ©ÁôæÂàÜÊØîÁæΩÂåñÔºöÂü∫‰∫éÁôæÂàÜÊØîË∞ÉÊï¥ÁæΩÂåñÂçäÂæÑÔºåÂèØ‰øùÊåÅÈîêÂà©ËæπÁºò
  - ÈÅÆÁΩ©Â∞∫ÂØ∏ÂØπÈΩêÔºöËá™Âä®ÂØπÈΩê‰∏çÂêåÂ∞∫ÂØ∏ÁöÑÈÅÆÁΩ©
  - ÈÅÆÁΩ©ÁßªÈô§ÔºöÁßªÈô§ÂõæÂÉè‰∏≠ÁöÑÈÅÆÁΩ©Âå∫Âüü
  - ÈÅÆÁΩ©ÂàáÊç¢ÔºöÂú®‰∏çÂêåÈÅÆÁΩ©Èó¥ÁÅµÊ¥ªÂàáÊç¢
  - Âü∫‰∫éÈÅÆÁΩ©ÁöÑÂõæÂÉèÂØπÈΩêÔºö‰ΩøÁî®ÈÅÆÁΩ©ËøõË°åÈ´òÁ∫ßÂõæÂÉèÂØπÈΩê

- üë§ **‰∫∫‰ΩìÈÉ®‰ΩçÂ§ÑÁêÜ**Ôºö
  - ‰∫∫‰ΩìÈÉ®‰ΩçÈÄâÊã©Âô®ÔºöËΩªÊùæÈÄâÊã©Âπ∂Â§ÑÁêÜ‰∫∫‰ΩìÁâπÂÆöÈÉ®‰Ωç
  - ËÇ¢‰ΩìÈÄâÊã©Âô®ÔºöÊîØÊåÅ20Â§ö‰∏™‰∫∫‰ΩìÈÉ®‰ΩçÁöÑÈÄâÊã©ÔºåÂ¶ÇÁúºÁùõ„ÄÅÂò¥Â∑¥„ÄÅÊâãËáÇÁ≠â
  - Ëá™Âä®È©¨ËµõÂÖãÔºöÂü∫‰∫éÂßøÊÄÅÊ£ÄÊµãÁöÑËá™Âä®È©¨ËµõÂÖãÂäüËÉΩÔºåÈõÜÊàêMediaPipe

- üñºÔ∏è **ÂõæÂÉèÂ§ÑÁêÜ**Ôºö
  - RealESRGANË∂ÖÂàÜËæ®ÁéáÔºö‰ΩøÁî®ONNXÊ†ºÂºèÁöÑRealESRGANÊ®°ÂûãËøõË°åÈ´òË¥®ÈáèÂõæÂÉèÊîæÂ§ß
  - ÂõæÂÉèÂèçÁõ∏Ôºö‰∏ÄÈîÆÂèçËΩ¨ÂõæÂÉèÈ¢úËâ≤ÔºåÂ∏¶ÊúâÂºÄÂÖ≥ÊéßÂà∂
  - ÂéªÈ•±ÂíåÂ∫¶ÔºöÂü∫Á°ÄÂíåÈ´òÁ∫ßÂõæÂÉèÂéªËâ≤ÂäüËÉΩ
  - ÂÉèÁ¥†Â§ÑÁêÜÔºöÂÉèÁ¥†Âåñ„ÄÅÂÉèÁ¥†Ê†°Ê≠£„ÄÅÂ±ÄÈÉ®ÂÉèÁ¥†ÂåñÂíåÂÉèÁ¥†Â¢ûÂº∫
  - ÈÄºÁúüÂô™ÁÇπÔºöÊ∑ªÂä†Ëá™ÁÑ∂Â§ñËßÇÁöÑÂô™ÁÇπÔºåÊîØÊåÅÂ§öÁßçÂèÇÊï∞Ë∞ÉÊï¥

- üìù **ÊñáÊú¨Â§ÑÁêÜ**Ôºö
  - ÊñáÊú¨Ê∏ÖÁêÜÂô®ÔºöÊ∏ÖÁêÜÂíå‰ºòÂåñÊèêÁ§∫ÊñáÊú¨ÔºåÊîØÊåÅÊ†áÁ≠æËøáÊª§ÂíåÂè•Â≠êËøáÊª§

- üìä **ÂÖÉÊï∞ÊçÆÂ∑•ÂÖ∑**Ôºö
  - Âà†Èô§ÂÖÉÊï∞ÊçÆÔºö‰ªéÂõæÂÉè‰∏≠Âà†Èô§ÂÖÉÊï∞ÊçÆ
  - Âä†ËΩΩÂõæÂÉè(Ê∏ÖÈô§ÂÖÉÊï∞ÊçÆ)ÔºöÂä†ËΩΩÂõæÂÉèÁöÑÂêåÊó∂Ê∏ÖÈô§ÂÖÉÊï∞ÊçÆ
  - Êü•ÁúãÂÖÉÊï∞ÊçÆÔºöÊ£ÄÊü•ÂõæÂÉèÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ
  - ÊâπÈáèÂà†Èô§ÂÖÉÊï∞ÊçÆÔºöÊâπÈáèÂ§ÑÁêÜÂ§öÂº†ÂõæÂÉèÁöÑÂÖÉÊï∞ÊçÆ

- üß† **ÂÜÖÂ≠òÁÆ°ÁêÜ**Ôºö
  - ÂÜÖÂ≠òÁÆ°ÁêÜÂô®Ôºö‰ºòÂåñËäÇÁÇπÂ§ÑÁêÜËøáÁ®ã‰∏≠ÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÔºåÊèêÈ´òÂ§ÑÁêÜÊïàÁéá

### üìÇ ËäÇÁÇπÊñá‰ª∂‰∏éÂäüËÉΩÂØπÂ∫î

Êú¨Êèí‰ª∂ÂåÖÂê´‰ª•‰∏ãPythonÊ®°ÂùóÊñá‰ª∂ÔºåÊØè‰∏™Êñá‰ª∂ÂÆûÁé∞‰∫ÜÁâπÂÆöÁöÑÂäüËÉΩËäÇÁÇπÔºö

| Êñá‰ª∂Âêç | ËäÇÁÇπÂêçÁß∞ | ÂäüËÉΩÊèèËø∞ |
| ------ | ------- | ------- |
| **yoloCrop.py** | üê≥YOLOÊ£ÄÊµãË£ÅÂâ™ | ‰ΩøÁî®YOLOÊ®°ÂûãÊ£ÄÊµãÂõæÂÉè‰∏≠ÁöÑÂØπË±°Âπ∂Êô∫ËÉΩË£ÅÂâ™ÔºåÊîØÊåÅÂ§öÁßçÊ£ÄÊµãÁ±ªÂà´ÂíåË£ÅÂâ™Ê®°Âºè |
| **yoloPaste.py** | üê≥YOLOÂõæÂÉèÊãºÊé• | Â∞ÜÊ£ÄÊµãÂà∞ÁöÑÂØπË±°Êô∫ËÉΩÊãºÊé•Âà∞ÂÖ∂‰ªñÂõæÂÉè‰∏äÔºåÊîØÊåÅ‰ΩçÁΩÆË∞ÉÊï¥ |
| **MaskBoolean.py** | üê≥ÈÅÆÁΩ©Â∏ÉÂ∞îËøêÁÆó, üê≥Â§öÈÅÆÁΩ©ËøêÁÆó | ÈÅÆÁΩ©ÂØπÈΩêÂ∏ÉÂ∞îËøêÁÆóÂíåÂ§öÈÅÆÁΩ©ËøûÁª≠Â∏ÉÂ∞îËøêÁÆóÔºåÊîØÊåÅÂ§öÁßçÂ∏ÉÂ∞îÊìç‰Ωú |
| **MaskComposite.py** | üê≥È´òÁ∫ßÈÅÆÁΩ©ÂêàÊàê, üê≥Âü∫‰∫éÈÅÆÁΩ©ÁöÑÂõæÂÉèÂêàÊàê | Â§çÊùÇÁöÑÈÅÆÁΩ©ÂêàÊàêÂ∑•ÂÖ∑ÔºåÁî®‰∫éÂàõÂª∫È´òÁ∫ßÂêàÊàêÊïàÊûú |
| **MaskMerge.py** | üê≥Â§öÈÅÆÁΩ©ÂêàÂπ∂, üê≥ÈÅÆÁΩ©ÂêàÂπ∂ | Êèê‰æõÁÆÄÂçïÂíåÈ´òÁ∫ß‰∏§ÁßçÈÅÆÁΩ©ÂêàÂπ∂ÂäüËÉΩ |
| **MaskRegionExpand.py** | üê≥ÈÅÆÁΩ©Âå∫ÂüüÊâ©Â±ï | Âú®Âõõ‰∏™ÊñπÂêëÊâ©Â±ïÈÅÆÁΩ©Âå∫ÂüüÔºåÊîØÊåÅÊ∏êÂèòËøáÊ∏°ÂíåËæπÁºòÂπ≥Êªë |
| **MaskFeatherPercentage.py** | üê≥ÈÅÆÁΩ©ÁôæÂàÜÊØîÁæΩÂåñ | Âü∫‰∫éÂõæÂÉèÂ∞∫ÂØ∏ÁôæÂàÜÊØîË∞ÉÊï¥ÁæΩÂåñÂçäÂæÑÔºåÂèØ‰øùÊåÅÈîêÂà©ËæπÁºò |
| **MaskSizeAlign.py** | üê≥ÈÅÆÁΩ©Â∞∫ÂØ∏ÂØπÈΩê | Â∞Ü‰∏çÂêåÂ∞∫ÂØ∏ÁöÑÈÅÆÁΩ©Ë∞ÉÊï¥‰∏∫Áõ∏ÂêåÂ∞∫ÂØ∏ÔºåÊîØÊåÅÂ§öÁßçÂØπÈΩêÊñπÂºè |
| **MaskRemove.py** | üê≥ÈÅÆÁΩ©ÁßªÈô§ | ‰ªéÂõæÂÉè‰∏≠ÁßªÈô§ÈÅÆÁΩ©Âå∫ÂüüÔºåÊîØÊåÅÂ§öÁßçÂ°´ÂÖÖÊñπÂºè |
| **MaskSwitch.py** | üê≥ÈÅÆÁΩ©ÂàáÊç¢ | Âú®Â§ö‰∏™ÈÅÆÁΩ©‰πãÈó¥ËøõË°åÊù°‰ª∂ÂàáÊç¢ |
| **ImageAlignByMask.py** | üê≥Âü∫‰∫éÈÅÆÁΩ©ÁöÑÂõæÂÉèÂØπÈΩê | ‰ΩøÁî®ÈÅÆÁΩ©ÂÆö‰ΩçËøõË°åÈ´òÁ∫ßÂõæÂÉèÂØπÈΩê |
| **BodyPartSelector.py** | üê≥‰∫∫‰ΩìÈÉ®‰ΩçÈÄâÊã©Âô® | ‰∫∫‰Ωì‰∏ªË¶ÅÈÉ®‰ΩçÁöÑÈÄâÊã©Âô®ÔºåÁî®‰∫é‰∏éControlNetÁ≠âÈÖçÂêà‰ΩøÁî® |
| **LimbSelector.py** | üê≥ËÇ¢‰ΩìÈÄâÊã©Âô® | ËØ¶ÁªÜÁöÑ‰∫∫‰ΩìËÇ¢‰ΩìÈÉ®‰ΩçÈÄâÊã©Âô®ÔºåÊîØÊåÅ20Â§ö‰∏™‰∫∫‰ΩìÈÉ®‰Ωç |
| **auto_censor.py** | üê≥Âü∫‰∫éOpenPoseÁöÑËá™Âä®È©¨ËµõÂÖã | ‰ΩøÁî®OpenPoseÊ£ÄÊµãÁöÑËá™Âä®È©¨ËµõÂÖãÔºåÈõÜÊàêMediaPipe |
| **RealESRGANUpscaler.py** | üê≥RealESRGANË∂ÖÂàÜËæ®Áéá | ‰ΩøÁî®ONNXÊ†ºÂºèÁöÑRealESRGANÊ®°ÂûãËøõË°åÈ´òË¥®ÈáèÂõæÂÉèÊîæÂ§ß |
| **InvertImage.py** | üê≥ÂõæÂÉèÂèçÁõ∏ | ‰∏ÄÈîÆÂèçËΩ¨ÂõæÂÉèÈ¢úËâ≤ÔºåÂ∏¶ÊúâÂºÄÂÖ≥ÊéßÂà∂ |
| **desaturate.py** | üê≥ÂõæÂÉèÂéªËâ≤, üê≥ÂõæÂÉèÂéªËâ≤(V2) | Âü∫Á°ÄÂíåÈ´òÁ∫ßÁöÑÂõæÂÉèÂéªÈ•±ÂíåÂ∫¶Â§ÑÁêÜ |
| **square_pixel.py** | üê≥ÂÉèÁ¥†Âåñ, üê≥ÂÉèÁ¥†Ê†°Ê≠£, üê≥Â±ÄÈÉ®ÂÉèÁ¥†Âåñ, üê≥ÂÉèÁ¥†Â¢ûÂº∫ | Â§öÁßçÂÉèÁ¥†Ëâ∫ÊúØÈ£éÊ†ºÂ§ÑÁêÜÂ∑•ÂÖ∑ |
| **RealisticNoise.py** | üê≥ÈÄºÁúüÂô™ÁÇπ | Ê∑ªÂä†Ëá™ÁÑ∂Â§ñËßÇÁöÑÂô™ÁÇπÔºåÊîØÊåÅÂ§öÁßçÂèÇÊï∞Ë∞ÉÊï¥ |
| **TextCleaner.py** | üê≥ÊñáÊú¨Ê∏ÖÁêÜÂô® | Ê∏ÖÁêÜÂíå‰ºòÂåñÊèêÁ§∫ÊñáÊú¨ÔºåÊîØÊåÅÊ†áÁ≠æËøáÊª§ÂíåÂè•Â≠êËøáÊª§ |
| **MetadataUtils.py** | üê≥Âà†Èô§ÂÖÉÊï∞ÊçÆ, üê≥Âä†ËΩΩÂõæÂÉè(Ê∏ÖÈô§ÂÖÉÊï∞ÊçÆ), üê≥Êü•ÁúãÂÖÉÊï∞ÊçÆ, üê≥ÊâπÈáèÂà†Èô§ÂÖÉÊï∞ÊçÆ | ÂõæÂÉèÂÖÉÊï∞ÊçÆÂ§ÑÁêÜÂ∑•ÂÖ∑ÈõÜ |
| **MemoryManager.py** | üê≥ÂÜÖÂ≠òÁÆ°ÁêÜÂô® | ‰ºòÂåñËäÇÁÇπÂ§ÑÁêÜËøáÁ®ã‰∏≠ÁöÑÂÜÖÂ≠ò‰ΩøÁî® |

### üìã ‰æùËµñË¶ÅÊ±Ç

#### Ê†∏ÂøÉ‰æùËµñ
- ComfyUIÊúÄÊñ∞ÁâàÊú¨
- Python 3.8+
- torch >= 2.0.0
- Pillow >= 9.0.0
- numpy >= 1.22.0

#### ÂèØÈÄâ‰æùËµñÔºàÁî®‰∫éÁâπÂÆöÂäüËÉΩÔºâ
- ultralytics >= 8.0.0 (YOLOÂäüËÉΩ)
- onnxruntime >= 1.14.0 (RealESRGANË∂ÖÂàÜËæ®ÁéáÂíåONNXÊ®°Âûã)
- scipy >= 1.8.0 (È´òÁ∫ßÈÅÆÁΩ©Â§ÑÁêÜ)
- opencv-python >= 4.5.0 (ÈÅÆÁΩ©ÂêàÊàêÂíåËá™Âä®È©¨ËµõÂÖã)
- mediapipe >= 0.9.0 (Ëá™Âä®È©¨ËµõÂÖãÂßøÊÄÅÊ£ÄÊµã - ÊúâÂõûÈÄÄÊñπÊ°à)
- realesrgan >= 0.3.0 (RealESRGANË∂ÖÂàÜËæ®Áéá - ÊúâÂõûÈÄÄÊñπÊ°à)
- torchvision >= 0.15.0 (YOLOÊãºÊé•ÂèòÊç¢ÂáΩÊï∞)
- requests >= 2.25.0 (ÂÜÖÂ≠òÁÆ°ÁêÜÂô®ÁΩëÁªúÂäüËÉΩ)

### üíæ ÂÆâË£ÖÊñπÊ≥ï

#### ÊñπÊ≥ï1Ôºö‰ΩøÁî®ComfyUI Manager (Êé®Ëçê)

1. Âú®ComfyUI‰∏≠ÂÆâË£ÖComfyUI Manager
2. Âú®Custom NodesÈÄâÈ°πÂç°‰∏≠ÊêúÁ¥¢"Pond Nodes"Âπ∂ÂÆâË£Ö

#### ÊñπÊ≥ï2ÔºöÊâãÂä®ÂÆâË£Ö

1. ÂÖãÈöÜÊàñ‰∏ãËΩΩÊ≠§‰ªìÂ∫ì
2. Â∞ÜÊñá‰ª∂Â§πÊîæÂÖ•ComfyUIÁöÑ`custom_nodes`ÁõÆÂΩï
3. ÂÆâË£ÖÊâÄÈúÄ‰æùËµñÔºö
   ```bash
   pip install -r requirements.txt
   ```

### üìå Ê®°ÂûãËÆæÁΩÆ

- Ê®°ÂûãÁöÑ‰∏ãËΩΩÈìæÊé•:https://pan.baidu.com/s/1xx6KEsdyj9bvV5MlGZcvLQ?pwd=ukr2


#### YOLOÊ®°Âûã
- Â∞ÜYOLOÊ®°ÂûãÊñá‰ª∂(.pt)ÊîæÂÖ•`ComfyUI/models/yolo/`ÁõÆÂΩï
- Êé®Ëçê‰ΩøÁî®YOLOv8Ê®°ÂûãÔºåÂ¶Çyolov8n.ptÊàñyolov8s.pt

#### RealESRGANÊ®°Âûã
- Â∞ÜRealESRGAN ONNXÊ®°ÂûãÊîæÂÖ•`ComfyUI/models/upscale_models/`ÁõÆÂΩï
- ÈªòËÆ§‰ΩøÁî®RealESRGAN_x4plus.pth

### ‚ö†Ô∏è ÈáçË¶ÅËØ¥Êòé

- **‰æùËµñÈ°π**ÔºöÊüê‰∫õËäÇÁÇπÈúÄË¶ÅÂèØÈÄâ‰æùËµñÈ°πÔºåÊåâÈúÄÂÆâË£ÖÔºö
  - YOLOËäÇÁÇπÈúÄË¶Å`ultralytics`
  - Ëá™Âä®È©¨ËµõÂÖãÈúÄË¶Å`mediapipe`ÔºàÊúâÂõûÈÄÄÊñπÊ°àÔºâ
  - RealESRGANË∂ÖÂàÜËæ®ÁéáÈúÄË¶Å`realesrgan`ÔºàÊúâÂõûÈÄÄÊñπÊ°àÔºâ
  - È´òÁ∫ßÈÅÆÁΩ©Êìç‰ΩúÈúÄË¶Å`opencv-python`

- **Ê®°ÂûãÊñá‰ª∂**ÔºöÁ°Æ‰øùÂ∞ÜÊ®°ÂûãÊñá‰ª∂ÊîæÂú®‰∏äËø∞ÊåáÂÆöÁöÑÊ≠£Á°ÆÁõÆÂΩï‰∏≠„ÄÇ

- **ÂÜÖÂ≠ò‰ΩøÁî®**ÔºöÂØπ‰∫éÂ§ßÂõæÂÉèÊàñÊâπÂ§ÑÁêÜÔºåËÄÉËôë‰ΩøÁî®ÂÜÖÂ≠òÁÆ°ÁêÜÂô®ËäÇÁÇπÊù•‰ºòÂåñÊÄßËÉΩ„ÄÇ

- **ÈîôËØØÂ§ÑÁêÜ**ÔºöÂ§ßÂ§öÊï∞ËäÇÁÇπÂåÖÂê´‰ºòÈõÖÁöÑÈîôËØØÂ§ÑÁêÜÔºåÂ¶ÇÊûúÁº∫Â∞ë‰æùËµñÈ°πÊàñÊâæ‰∏çÂà∞Ê®°ÂûãÔºå‰ºöÊèê‰æõ‰ø°ÊÅØÊÄßÊ∂àÊÅØ„ÄÇ

---

## English

A comprehensive collection of custom nodes for ComfyUI, providing rich image processing and mask operation functionality with advanced tools for computer vision, image manipulation, and workflow optimization.

### ‚ú® Features

This plugin collection includes various practical nodes to help you with:

- üîç **YOLO Object Detection & Cropping**:
  - YOLO Detection Crop: Intelligent object detection and cropping with class filtering and confidence settings
  - YOLO Image Paste: Paste detected objects onto other images with smart positioning

- üé≠ **Advanced Mask Operations**:
  - Mask Boolean Operations: Support intersection, union, difference, XOR operations with 9 alignment modes
  - Multi-Mask Operations: Support continuous boolean operations on multiple masks
  - Mask Merge & Composite: Provide mask merging and multi-mask merging nodes
  - Mask Region Expand: Expand mask regions in four directions with gradient transitions
  - Mask Percentage Feathering: Adjust feathering radius based on percentage, can preserve sharp edges
  - Mask Size Alignment: Automatically align masks of different sizes
  - Mask Remove: Remove mask regions from images with various fill methods
  - Mask Switch: Flexible switching between different masks
  - Image Align by Mask: Advanced image alignment using mask-based positioning

- üë§ **Human Body Part Processing**:
  - Body Part Selector: Easily select and process specific human body parts
  - Limb Selector: Support selection of 20+ human body parts like eyes, mouth, arms, etc.
  - Auto Censor: Automatic censoring using pose detection with MediaPipe integration

- üñºÔ∏è **Image Processing**:
  - RealESRGAN Upscaler: High-quality image upscaling using ONNX format RealESRGAN models
  - Image Invert: One-click color inversion with toggle control
  - Desaturate: Basic and advanced image desaturation functionality
  - Pixel Processing: Pixelization, pixel correction, partial pixelization, and pixel enhancement
  - Realistic Noise: Add natural-looking noise with multiple parameter adjustments

- üìù **Text Processing**:
  - Text Cleaner: Clean and optimize prompt text with tag filtering and sentence filtering

- üìä **Metadata Tools**:
  - Remove Metadata: Remove metadata from images
  - Load Image (Clear Metadata): Load images while clearing metadata
  - View Metadata: Check image metadata information
  - Batch Remove Metadata: Batch process metadata from multiple images

- üß† **Memory Management**:
  - Memory Manager: Optimize memory usage during node processing for improved efficiency

### üìÇ Node Files and Function Mapping

This plugin contains the following Python module files, each implementing specific function nodes:

| File Name | Node Names | Function Description |
| --------- | ---------- | -------------------- |
| **yoloCrop.py** | üê≥YOLO Detection Crop | Use YOLO models to detect objects in images and intelligently crop, supporting multiple detection classes and cropping modes |
| **yoloPaste.py** | üê≥YOLO Image Paste | Intelligently paste detected objects onto other images with position adjustment support |
| **MaskBoolean.py** | üê≥Mask Boolean Operations, üê≥Multi-Mask Operations | Mask alignment boolean operations and multi-mask continuous boolean operations with various boolean operations |
| **MaskComposite.py** | üê≥Advanced Mask Composite, üê≥Mask-Based Image Composite | Complex mask compositing tools for creating advanced composite effects |
| **MaskMerge.py** | üê≥Multi-Mask Merge, üê≥Mask Merge | Provide simple and advanced mask merging functionality |
| **MaskRegionExpand.py** | üê≥Mask Region Expand | Expand mask regions in four directions with gradient transitions and edge smoothing |
| **MaskFeatherPercentage.py** | üê≥Mask Percentage Feathering | Adjust feathering radius based on image size percentage, can preserve sharp edges |
| **MaskSizeAlign.py** | üê≥Mask Size Alignment | Adjust masks of different sizes to the same size with multiple alignment modes |
| **MaskRemove.py** | üê≥Mask Remove | Remove mask regions from images with multiple fill methods |
| **MaskSwitch.py** | üê≥Mask Switch | Conditional switching between multiple masks |
| **ImageAlignByMask.py** | üê≥Image Align by Mask | Advanced image alignment using mask positioning |
| **BodyPartSelector.py** | üê≥Body Part Selector | Human body main part selector for use with ControlNet and other tools |
| **LimbSelector.py** | üê≥Limb Selector | Detailed human limb part selector supporting 20+ human body parts |
| **auto_censor.py** | üê≥Auto Censor with OpenPose | Automatic censoring using OpenPose detection with MediaPipe integration |
| **RealESRGANUpscaler.py** | üê≥RealESRGAN Upscaler | High-quality image upscaling using ONNX format RealESRGAN models |
| **InvertImage.py** | üê≥Image Invert | One-click color inversion with toggle control |
| **desaturate.py** | üê≥Image Desaturate, üê≥Image Desaturate (V2) | Basic and advanced image desaturation processing |
| **square_pixel.py** | üê≥Pixelization, üê≥Pixel Correction, üê≥Partial Pixelization, üê≥Pixel Enhancement | Multiple pixel art style processing tools |
| **RealisticNoise.py** | üê≥Realistic Noise | Add natural-looking noise with multiple parameter adjustments |
| **TextCleaner.py** | üê≥Text Cleaner | Clean and optimize prompt text with tag filtering and sentence filtering |
| **MetadataUtils.py** | üê≥Remove Metadata, üê≥Load Image (Clear Metadata), üê≥View Metadata, üê≥Batch Remove Metadata | Image metadata processing toolset |
| **MemoryManager.py** | üê≥Memory Manager | Optimize memory usage during node processing |

### üìã Dependencies

#### Core Requirements
- ComfyUI latest version
- Python 3.8+
- torch >= 2.0.0
- Pillow >= 9.0.0
- numpy >= 1.22.0

#### Optional Dependencies (for specific features)
- ultralytics >= 8.0.0 (for YOLO functionality)
- onnxruntime >= 1.14.0 (for RealESRGAN upscaling and ONNX models)
- scipy >= 1.8.0 (for advanced mask processing)
- opencv-python >= 4.5.0 (for mask compositing and auto censor)
- mediapipe >= 0.9.0 (for auto censor pose detection - fallback available)
- realesrgan >= 0.3.0 (for RealESRGAN upscaling - fallback available)
- torchvision >= 0.15.0 (for YOLO paste transform functions)
- requests >= 2.25.0 (for memory manager network functionality)

### üíæ Installation

#### Method 1: Using ComfyUI Manager (Recommended)

1. Install ComfyUI Manager in ComfyUI
2. Search for "Pond Nodes" in the Custom Nodes tab and install

#### Method 2: Manual Installation

1. Clone or download this repository
2. Place the folder in ComfyUI's `custom_nodes` directory
3. Install required dependencies:
   ```bash
   pip install -r requirements.txt
   ```

### üìå Model Setup

#### YOLO Models
- Place YOLO model files (.pt) in `ComfyUI/models/yolo/` directory
- Recommended to use YOLOv8 models such as yolov8n.pt or yolov8s.pt
- Download from: [Ultralytics YOLOv8](https://github.com/ultralytics/ultralytics)

#### RealESRGAN Models
- Place RealESRGAN ONNX models in `ComfyUI/models/upscale_models/` directory
- Default uses RealESRGAN_x4plus.pth
- Download from: [Real-ESRGAN releases](https://github.com/xinntao/Real-ESRGAN/releases)

### ‚ö†Ô∏è Important Notes

- **Dependencies**: Some nodes require optional dependencies. Install them as needed:
  - YOLO nodes require `ultralytics`
  - Auto Censor requires `mediapipe` (has fallback)
  - RealESRGAN Upscaler requires `realesrgan` (has fallback)
  - Advanced mask operations require `opencv-python`

- **Model Files**: Make sure to place model files in the correct directories as specified above.

- **Memory Usage**: For large images or batch processing, consider using the Memory Manager node to optimize performance.

- **Error Handling**: Most nodes include graceful error handling and will provide informative messages if dependencies are missing or models are not found.

### üöÄ Usage Guide

#### YOLO Nodes

1. **YOLO Detection Crop**:
   - Input image and select YOLO model
   - Set confidence threshold and class filtering
   - Support multiple cropping modes: all objects, single object, by class
   - Adjustable crop region expansion range

2. **YOLO Image Paste**:
   - Intelligently paste detected objects onto other images
   - Support automatic alignment and position adjustment

#### Mask Operation Nodes

1. **Mask Boolean Operations**:
   - Provide two masks and select alignment mode (9 different alignment modes)
   - Support intersection, union, difference A-B, difference B-A, XOR, NOT A, NOT B boolean operations
   - Can add X-axis and Y-axis offsets and threshold settings

2. **Multi-Mask Operations**:
   - Support continuous boolean operations on multiple masks
   - Flexible configuration of operation methods for each step

3. **Mask Merge**:
   - Merge multiple masks with different blend modes
   - Adjust opacity and priority

4. **Mask Region Expand**:
   - Expand mask regions in left, top, right, bottom four directions
   - Support expanding black or white regions
   - Provide edge smoothing and gradient transition options

5. **Mask Percentage Feathering**:
   - Adjust feathering radius based on image size percentage
   - Option to preserve sharp edges

6. **Image Align by Mask**:
   - Advanced image alignment using mask positioning
   - Multiple alignment modes and offset controls

#### Image Processing Nodes

1. **RealESRGAN Upscaler**:
   - Use ONNX format RealESRGAN models for image upscaling
   - Support blend parameter adjustment for smooth transition effects

2. **Image Invert**:
   - One-click color inversion
   - Toggle control for easy workflow use

3. **Desaturate**:
   - Basic desaturation and advanced desaturation options
   - Support brightness preservation and different desaturation algorithms

4. **Pixel Processing**:
   - Pixelization: Convert images to pixel art style
   - Pixel Correction: Fix pixel ratio issues
   - Partial Pixelization: Only pixelize specific parts of the image
   - Pixel Enhancement: Enhance quality of pixel art style images

5. **Realistic Noise**:
   - Add natural-looking noise
   - Support multiple noise types, intensity, and random seed settings

6. **Auto Censor**:
   - Automatic censoring using pose detection
   - Support face, chest, and groin area detection
   - Configurable blur strength and censor area size

#### Text Processing Nodes

1. **Text Cleaner**:
   - Remove tags/prompts or entire sentences containing these words
   - Support multiple separators and Chinese/English punctuation recognition

#### Metadata Tool Nodes

1. **Remove Metadata**:
   - Remove metadata from single images
   - Preserve image quality unchanged

2. **Load Image (Clear Metadata)**:
   - Clear metadata while loading images
   - Avoid sensitive information transfer

3. **View Metadata**:
   - Check metadata information contained in images
   - Display in readable format

4. **Batch Remove Metadata**:
   - Process metadata from multiple images
   - Improve work efficiency

#### Memory Management Nodes

1. **Memory Manager**:
   - Optimize memory usage during node processing
   - Monitor and manage memory allocation for improved performance

### üõ†Ô∏è Troubleshooting

#### Common Issues

1. **Missing Dependencies**: Install required packages using pip
2. **Model Not Found**: Ensure model files are in correct directories
3. **Memory Issues**: Use Memory Manager node for large batch processing
4. **YOLO Detection Issues**: Check model compatibility and image quality

#### Performance Tips

- Use appropriate model sizes for your hardware
- Enable GPU acceleration when available
- Use Memory Manager for large workflows
- Consider batch processing for multiple images

### üìÑ License

This project is provided as-is for ComfyUI users. Please respect the licenses of individual dependencies and model files.

### ü§ù Contributing

Feel free to submit issues and pull requests to improve this node collection. All contributions are welcome!

---

*Note: This documentation reflects the current state after translation of all Chinese text to English. All node names, parameters, and descriptions are now in English for international users.* 